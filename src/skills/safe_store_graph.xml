<skill id="safe-store-graph" title="SafeStore Knowledge Graph" description="Extracting and querying structured entities and relationships from documents." category="python/safe_store/graph">
    <content>
        <![CDATA[
# ðŸ’Ž SOURCE OF TRUTH: safe_store Knowledge Graph (GraphStore)

The `GraphStore` uses an LLM to build a web of entities and relationships.

## ðŸ“ Ontology Definition
You MUST define a schema before building the graph:
```python
ontology = {
    "nodes": {
        "EntityName": {
            "description": "Definition",
            "properties": {"prop_name": "type"} # string, boolean, number
        }
    },
    "relationships": {
        "REL_TYPE": {
            "description": "How they connect",
            "source": "SourceNode",
            "target": "TargetNode"
        }
    }
}
```

## ðŸ› ï¸ GraphStore Usage
```python
from safe_store import GraphStore

graph = GraphStore(
    store=my_safe_store_instance,
    llm_executor_callback=lollms_query_func,
    ontology=ontology
)

# Build
graph.build_graph_for_all_documents(batch_size_chunks=10)

# Query
result = graph.query_graph(
    "How is Microservice A related to Database B?",
    output_mode="full" # "full" or "summary"
)
```

## ðŸ’¡ Extraction Tips
- **Batch Size**: Reduce `batch_size_chunks` to avoid OOM on large documents.
- **Retries**: Increase `llm_retries` in config for better JSON parsing from weak models.
]]>
    </content>
</skill>