<skill id="safe-store-core" title="SafeStore Core Class" description="Primary API for local semantic storage, vectorization, and document management." category="python/safe_store/core">
    <content>
        <![CDATA[
# ðŸ’Ž SOURCE OF TRUTH: SafeStore Core API

The `SafeStore` class is the main entry point for document indexing and semantic retrieval.

## ðŸ› ï¸ Class Instantiation
```python
import safe_store

store = safe_store.SafeStore(
    db_path="knowledge_base.db",          # Path to SQLite file
    vectorizer_name="st",                 # "st" (SentenceTransformers), "tfidf", "ollama", "openai", "cohere"
    vectorizer_config={                   # Dictionary based on vectorizer type
        "model": "all-MiniLM-L6-v2"       # Default for "st"
    },
    chunking_strategy="token",            # "token", "recursive" (recommended for code), "sentence"
    chunk_size=512,                       # Tokens per chunk
    chunk_overlap=50,                     # Token overlap between chunks
    encryption_key=None,                  # Optional password for encryption at rest
    lock_timeout=120                      # Seconds to wait if DB is locked
)
```

## ðŸ“„ Document Operations
### Adding Documents
- `store.add_document(file_path, metadata={}, chunk_processor=None, force_reindex=False)`
- `store.add_text(unique_id, text, metadata={}, chunk_processor=None, force_reindex=False)`

### Retrieval
- `store.query(query_text, top_k=5)` -> Returns List of Dicts: `[{'chunk_id', 'chunk_text', 'similarity', 'document_metadata', ...}]`

### Maintenance & Inspection
- `store.list_documents()`: Returns metadata of all indexed files.
- `store.reconstruct_document_text(file_path)`: Reassembles chunks back into original text.
- `store.conn.execute("VACUUM")`: Reclaim space after deletions.

## ðŸ”— Supported Extensions
`.pdf`, `.docx`, `.xlsx`, `.xls`, `.pptx`, `.msg` (Outlook), `.txt`, `.md`, `.json`, `.py`, `.cpp`, `.js`, etc.
]]>
    </content>
</skill>